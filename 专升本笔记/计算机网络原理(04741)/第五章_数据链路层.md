数据链路层提供的服务
	组帧
		概念:将传输的数据封装帧的过程
		一个帧由三部分组成:
			帧头:发送节点和接收节点的地址信息
			帧尾:用于差错检测的差错编码
			帧定界:识别一个帧的开始和结束
				帧头帧尾的字节都是01111110,用于做帧的定界
	链路接入
		点对点链路
			独占传输信道
		广播链路
			信道共享
	可靠交付
		停等协议
		滑动窗口协议
	差错控制
		物理层传输过程中发生的比特翻转
		误比特率:一段时间内出现差错的比特数/传输比特总数
差错控制
	概念:
		通过差错编码技术:,实现对信息传输差错的检测,并基于某种机制进行差错纠正和处理
	导致传输的差错的-噪声干扰
		随机噪声
			随机差错
			独立差错
			冲击噪声(产生差错的主要原因)
			突发差错
	差错控制的基本方式:
		检错重发:
			发送端:发送时对数据进行差错编码
			接收端:对接收到的数据进行差错检测,若出错,请求发送端重新发送对应数据
		前向纠错:(FEC)&自动请求重发(ARQ)
			发送端:对数据进行纠错编码,发送包含纠错编码的帧
			接收端:收到数据,利用纠错编码进行差错检测
			适用场景:
				单工链路,对实时性要求比较高的应用
		反馈校验:
			由接收端重新将收到的数据发回给发送端进行校验确认
			优点:
				原理简单,无需差错编码
			缺点:
				需要相同能力的反向信道,传输效率低,实时性差
		检错丢弃:
			网络应用对可靠性要求不高,可以采用不纠正错误数据,直接丢弃错误数据
			仅适用实时性高的场景
	差错编码的基本原理:
		原理:在待传输数据信息的基础上,附加一定的冗余信息,该信息与数据信息建立某种关联关系
			例如:原数据:00,01,10,11
				增加冗余信息的数据:0000,0101,1010,1111
	差错编码的检错和纠错能力:
		什么是汉明距离?
			两个等长码之间,对应位数不同的位数
				例如:码字1:01100101
					码字2:10011101
					那么DC=5
			编码集的汉明距离
				先算出所有码字对之间的汉明距离，再取其中的最小值。
					编码集{10000111，10010110，10100101，10110100}
						10000111 与 10010110：第4、8位不同 → 距离=2
						10000111 与 10100101：第3、7位不同 → 距离=2
						10000111 与 10110100：第3、4、7、8位不同 → 距离=4
						10010110 与 10100101：第3、4、7、8位不同 → 距离=4
						10010110 与 10110100：第3、7位不同 → 距离=2
						10100101 与 10110100：第4、8位不同 → 距离=2
					编码集的汉明距离：ds=min{2，2，4，4，2，2}
					编码集的汉明距离：ds＝2
		检错编码:
			检错编码可以检错多少位的差错,取决于ds = r + 1
				也就是说可以检测出来r位差错。如发生一位差错，可以100%被检测出来。
		纠错编码:
			ds = 2r + 1,则差错编码可以纠正r位差错
				如果ds = 2,那么r就等于2分之1,也就可以检错0个差错
	典型的差错编码:
		奇偶校验
		奇偶校验码是一种非常基础且常用的数据校验方法，主要用于检测数据在传输或存储过程中是否发生了单比特错误。它通过在原始数据后添加一个校验位（也叫冗余位）来实现。
			奇校验码:
				如果原始数据中“1”的个数是奇数，校验位就设为“0”；如果原始数据中“1”的个数是偶数，校验位就设为“1”。
				例如:
					数据 10110111：数一数，有6个“1”（偶数），所以加一个“1”使总数为7（奇数）→ 101101111。
					数据 10100111：数一数，有5个“1”（奇数），所以加一个“0”保持总数为5（奇数）→ 101001110
			偶检验码:
				如果原始数据中“1”的个数是偶数，校验位就设为“0”；如果原始数据中“1”的个数是奇数，校验位就设为“1”。
			局限性:
				仅能发现单个比特的错误,若出现多个比特的错误就失效了
				只能发现错误,不能定位错误位置并纠正错误
		汉明码
			在奇偶校验的基础上实现了错误位置的定位并纠正错误,但是仍然只能搞定单一比特的翻转错误
		循环冗余码(CRC码)
			 “异或”逻辑运算
				1 异或1=0
				0 异或0=0
				1 异或0=1
				0 异或1=1
			例子:将二进制位串看成是系数为0 或1 的多项式的系数
				例如:
					分析多项式:G(x)=x5 + x2  + 1
					从最高次方5,依次检查到0,看看每一项是否存在,存在为1,反之为0
						X5 存在 为1
						X4不存在 为0
						X3不存在 为0
						X2存在 为1
						X1不存在为 0 
						X0存在 为1
						因此多项式G(X) = 100101
			实现操作步骤:
				第一步:
					在原始数据后面加r个0。r是G(x)的长度减1
					xrM(x),x^r代表左移r位，M(x)代表原始数据多项式。
						xrM(x) 就是原始数据后面加上了 r 个 0。它是 CRC 计算的起点，为即将计算出来的校验码预留出了位置。
							r是检验位的长度,通过G(x)的位数减1得出
							xr是左移操作
				第二步:
					除法求余数
						用xrM(x) % M(x) 取余
			例题:假设CRC 编码采用的生成多项式G（x）=x4+x+1，请为位串10111001 进行CRC 编码
			接收方在收到带CRC码的帧后,如何判断如何有错?
				对接收的到位串异或生成多样式
					余数为0,无措
					余数不为0,有错,丢弃
	多路访问控制协议
		信道划分MAC协议
			原理:利用多路复用技术实现信道共享的MAC协议
			频分多路:FDM
				通过将单个信道通过划分成多个子信道,每个子信道占用不同频率来实现在单信道下传输不同的信号
				优点:
					分路方便,在模拟通信中应用广泛
				缺点:
					各路信号之间相互干扰,不提供差错控制,不便于性能检测
			时分多路:TDM
				将信道传输的信号划分成多个等长的时隙,每路信号占用不同的时隙
					同步时分多路(STDM)
						固定的时隙轮流分配,时隙可能会空闲,造成浪费
					异步时分多路复用(ATDM)
						异步时分多路复用
							允许动态地分配传输介质时间片
						统计时分多路复用(STDM)
							不固定,为每个时隙加上用户标识,提升信道利用率,实现相对复杂
			波分多路:WDM
				实质上是一种频分多路复用.广泛用于光纤通信
					在通信过程中,光的载波频率很高,通常用光的波长代替频率讨论
						实现长距离传输可以采用:
							波分复用
							光纤放大器
			码分多路:CDM
				通过利用相互正交的码组分别编码各路原始信息的每个码元，使得编码后的信号在同一信道中混合传输。是一种扩频的通信形式。
	随机访问MAC
		概念:所有用户都可以根据自己的意愿随机在信道发送信息
		ALOHA协议
			纯ALOHA
				任何一个站点有数据时都可以直接发送到信道,如果有站点回复,说明发送成功,反之说明发生冲突,在等待一个随机时间,重新进行发送
			性能,主要看两点:
				吞吐量:在一帧发送的时间内成功发送的平均帧数帧数
				网络负载:在一帧发送的时间内发送的平均帧数(包括成功失败)
					网络负载不能大于0.5
		时隙ALOHA(是最早,最基本的无线通信协议)
			把信道时间划分为离散的时隙，每个时隙为发送一帧所需的时间，每个通信站点只能在每个时隙开始的时刻发送帧。如果在一个时隙内发送帧出现冲突，下一个时隙以概率p 重发该帧，以概率（1-p）不发该帧（等待下一个时隙），直到帧发送成功。p 不能为1，否则会出现死锁。
		优点:
			通过同步各个通信站发送站发送时间的方式,提高了信道利用率
		缺点:
			ALOHA协议在发送之前无论信道是否空闲都会进行发送,大大增加冲突可能性
	载波监听多路访问协议:
		工作原理：通过硬件装置（载波监听装置），在通信站发送数据之前，先监听信道上其他站点是否在发送数据，如果在发送，则暂时不发送。
		根据监听策略的不同可以分为三类:
			非坚持CSMA
				先侦听，空闲发送，忙时需要等待一个随机时间才重新开始侦听。
				优点:减少冲突概率
				缺点:：增加了信道的空闲时间；延迟一个随机时间，发送时间延迟。极端情况，始终无法发送。
			1-坚持CSMA
				若通信站有数据发送,先监听信道
				若发现空闲信道,则立即发送数据
				若发现信道繁忙,则继续监听,直到发现空闲时后立即发送数据
				优点:减少信道空闲时间
				缺点:增加了发生冲突的概率,都在监听,监听的空闲时,都会进行发送
			P-坚持CSMA
				是一种改进的载波侦听多路访问协议，其核心思想是在信道空闲时，并非立即发送数据，而是以一定的概率P 决定是否在当前时隙发送，以Q=1-P的概率延迟时隙发送,从而降低冲突概率。
		CSMA/CD 带冲突检测的载波监听多路访问协议
			工作原理:当在信道中发生碰撞,会立即停止发送,并告诉其他的站点有冲突发生
			CSMA/CD 的工作状态分为：传输周期、竞争周期、空闲周期三种状态:
				传输状态:一个通信站在使用,其他通信站禁止使用
				竞争状态:所有通信站都有权尝试对信道的使用权
				空闲:没有通信展使用信道
				仍然会有冲突:因为信号传播延迟
				求则最远的两个站点之间的距离至少需要减少多少？
				公式:D=（（L/R）*v）/2
				最远距离 = ((数据帧的长度/信道信息的传输速率) * 信号的传播速度) / 2
				求最远距离:
				公式:d= L×v/2r
	受控接入MAC协议:
		概念:每个用户不能随意的接入信道而必须服从一定的控制
		集中式控制
			系统有一个主机,负责调度其他通信站接入信道,从而避免冲突
			方法:轮询技术
				轮叫轮询
					挨个询问各个站点是否数据发送,有的话回复主机有,反之则无,只能等主机最后统一调度
					缺点：轮询帧在共享线路上不听的循环往返，较大开销，导致帧发送的时间延长。
				传递轮询	
					一种中心化、带地址附带机制的轮询协议。它的核心是主机主动轮询，站点被动响应，并通过双线结构分离数据和控制信息					
		分散式控制
		令牌是一种特殊的帧，代表了通信站使用信道的许可。在信道空闲时一直在信道上传输。一个通信站想要发送数据就必须首先获得令牌。
			1、网络空闲时，只有一个令牌在环路上绕行。（空令牌：标志位置为“0”。被占用：标志位置为“1”）。
			2、当一个站点要发送数据时，必须等待并获得一个令牌，将令牌的标志位置为“1”，随后便可发送数据。
			3、环路中的每个站点边转发数据，边检查数据帧中的目的地址，若为本站点的地址，便读取其中所携带的数据。
			4、数据帧绕环一周返回时，发送站将其从环路上撤销，即“自生自灭”。
			5、发送站点完成数据发送后，重新产生一个令牌传至下一个站点，以使其他站点获得发送数据帧的许可权。
			令牌丢失和数据帧无法撤销是环网上最严重的两种错误。
	局域网
			为了是数据链路层更好地适用多种局域网标准,IEEE802委员会将局域网的数据链路层拆分两个子层:
				逻辑链路控制(LLC子层)
				介质访问控制(MAC子层)	
			MAC地址:
				基本概念:
					1. MAC地址具有唯一性,每个网适配器对应一个MAC地址
					2. MAC 地址空间的分配：由电气和电子工程师协会（IEEE）统一管理。IEEE 分配前 24 位的 MAC 地址块。后24 位由生产公司分配。
						1. MAC地址 6字节 48位 前二十四由IEEE固定,后二十四由生产公司分配
			地址解析协议
				简述ARP协议的作用及其基本思想:
					ARP通过目的主机的ip地址获取其MAC地址
					基本思想:
						1 每一台主机都会预留内存空间作为ARP缓存,存储主机所在局域网的其他主机的IP和MAC的映射关系
						2 ARP通过广播和ARP查询报文的方式询问目的IP对应MAC
		以太网(ethernet):目前最流行的局域网技术
			以太网的优势:
				以太网是第一个广泛部署的高速局域网
				令牌环,FDDI(纤分布式接口)和ATM(异步传输模式)等比以太网技术更复杂
				以太网的传输速率也比较出色
				以太网硬件价格便宜,网络造价成本低
			经典的以太网技术:
				1. 采用粗同轴电缆连接的总线型以太网
				2. 数据的传输速率为10Mbit/s,无连接不可靠
				3. MAC协议采用CSMA/CD协议
				4. 相距最远主机信号往返的传播时延为 51.2μs，所以以太网最短帧长为 64 字节
		冲突域
			一个局域网中的两台主机同时向物理介质发送信号,这两路信号一定会在物理介质中相互干扰,从而导致发送失败,这两个节点属于同一个冲突域
		广播域
			任一结点发送链路层广播帧目的 MAC：FF-FF-FF-FF-FF-FF），接收该广播帧的所有结点与发送结点属于同一个广播域。一个局域网的广播域通常对应一个子网。
		以太网帧结构
			目的地址和源地址:48位MAC
			类型:标识上层协议,2字节
			数据:封装上层协议的分组,46-1500字节
			CRC:校验采用循环冗余校验,4字节
		交换机
			工作原理:
				当一帧到达时,交换机首先需要决策将该帧丢弃还是转发,如果转发还需进一步决策将该帧转发到哪个端口去.决策依据是以目的MAC为主键查询内部转发表(无需转发,选择性转发,泛红)
			以太网交换机的自学习:
				一开始交换机的转发表是空白的,通过接收数据帧然后泛红数据帧,接收响应数据帧，最后将源主机和目的主机的MAC地址和接口的映射关系写入表中,进一步完善转发表
			以太网交换机的优点:
				1 消除冲突
					交换机分割了冲突域，交换机具有缓存机制，某一时间点只会传输一个帧或者不传输；与集线器不一样。
				2 支持异质链路
					交换机的不同端口可以连接不同类型的链路
				3 易于网络管理
		虚拟局域网(VLAN)
			以软件的方式划分和管理局域网中的工作组，限制接收广播信息的主机数，不会因为传播过多的广播信息而引起性能的恶化（“抑制广播风暴”）
			划分虚拟局域网的方法:
				基于交换机的端口划分
				基于MAC地址划分
				基于上层协议和地址划分
	点对点链路协议
		PPP协议
			适合单个发送方和单个接收方的点对点链路
				典型应用:
					家庭用户拨号上网
				提供三类功能:
					成帧:确定一帧的开始和结束，支持差错检测。
					链路层控制协议(LCP)
						启动线路,检测线路,协商参数,关闭线路
					网络控制协议(NCP)
						协商网络层选项
					PPP定义控制转义字节的内容为01111101
					帧格式:
						标志:1字节,01111110
						地址:1字节,11111111
						控制:1字节,00000011
						协议:1或2字节
						信息:可变长度
						校验和:2或4字节
						标志:1字节,01111110
		HDLC协议(高级数据链路层控制协议)
			应用点对点链路或点对多点链路
			三种类型的帧:HDLC中控制字段第1,2位标识传送帧的类型
				信息帧(I格式)
					第一位为0,表示信息帧
				监控帧(S格式)
					第1,2位为10为监控帧
					HDLC监控帧中控制字段为第3,4位为0,1时表示拒绝,0,0时表示接收就绪,1,0时表示接收未就绪
				无编号帧(U格式)
					11为无编号帧
					用于提供对链路的建立,拆除及多种控制功能
				帧格式:
				(F)标志:1字节
				(A)地址:1字节
				(C)控制:1字节
				(I)信息:一个汉字2字节
				(FCS)帧校验序列:2字节
				(F)标志位:1字节
			面向位的协议:位填充技术(区分“数据”和“帧边界标志（01111110）”，使用了零比特填充法。)
				发送端:发现5个连续的1,插入一个0
				接收端:发现5个连续的1,删除一个0
			HDLC标志字段的比特模式为01111110,通过该字段确认帧的边界
			
		



			
